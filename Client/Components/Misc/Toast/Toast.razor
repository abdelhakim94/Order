@using Order.Client.Constants

@namespace Order.Client.Components.Misc

@* @if (show)
    { *@
<div class="@CSSCLasses.ComponentContainer @messageType" @onclick=@(async () => await CloseAsync())>
    <img src="@getIcon" class="notif-icon" />
    <div class="content">
        <p>@content</p>
    </div>
</div>
@* } *@

@code{
    private bool show { get; set; }
    private bool isError { get; set; }
    private string content { get; set; }
    private string getIcon { get => isError ? "icons/ko.png" : "icons/ok.png"; }
    private string messageType { get => isError ? "error" : "success"; }

    public Func<Task> OnCloseAsync { get; set; }

    public void Show(string content)
    {
        show = true;
        isError = false;
        this.content = content;
        StateHasChanged();
    }

    public void ShowError(string content)
    {
        show = true;
        isError = true;
        this.content = content;
        StateHasChanged();
    }

    public async Task CloseAsync()
    {
        show = false;
        content = string.Empty;
        if (OnCloseAsync is not null)
        {
            await OnCloseAsync();
        }
        StateHasChanged();
    }
}
